(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{D7oh:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return i})),t.d(a,"default",(function(){return c}));t("rzGZ"),t("Dq+y"),t("8npG"),t("Ggvi"),t("E5k/"),t("q1tI");var s=t("7ljp");var i={path:"/debug-service-worker-locally",date:"2020-04-25T13:12:33.962Z",title:"How to test a service worker locally using self signed certificates",featuredImage:"./featured-image.jpg",headerImage:"./featured-image.jpg",tags:["PWA","JS","ServiceWorker","web","JavaScript"],excerpt:"One of the most discussed topics of JS is the types system in context with the equality operator and explicit and implicit type coercion."},n={_frontmatter:i};function c(e){var a=e.components,t=function(e,a){if(null==e)return{};var t,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)t=n[s],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,["components"]);return Object(s.mdx)("wrapper",Object.assign({},n,t,{components:a,mdxType:"MDXLayout"}),Object(s.mdx)("p",null,"When you want to test PWA features like push notifications or handle caching within your development environment on your local machine you may encounter the following error message."),Object(s.mdx)("p",null,Object(s.mdx)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1706px"}}),"\n      ",Object(s.mdx)("a",Object.assign({parentName:"span"},{className:"gatsby-resp-image-link",href:"/static/2a4690c1b457b7f623f841f3faf5a80c/5fada/service-worker-error-example.png",style:{display:"block"},target:"_blank",rel:"noopener"}),"\n    ",Object(s.mdx)("span",Object.assign({parentName:"a"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"3.9525691699604746%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAS0lEQVQI1y3LOw6AIBAAUQ9kbSeKfBYWSYy/+99k3MJq8ooZcjxI+aTXBy03RV/E7OaKrp3NKdXafCe4RlqaeSf+n8iF2Bet4xT4AMPeJLxvhYgLAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.mdx)("picture",{parentName:"a"},"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/2a4690c1b457b7f623f841f3faf5a80c/6b97b/service-worker-error-example.webp 506w","/static/2a4690c1b457b7f623f841f3faf5a80c/2dbb9/service-worker-error-example.webp 1012w","/static/2a4690c1b457b7f623f841f3faf5a80c/25962/service-worker-error-example.webp 1706w"],sizes:"(max-width: 1706px) 100vw, 1706px",type:"image/webp"})),"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/2a4690c1b457b7f623f841f3faf5a80c/29f4e/service-worker-error-example.png 506w","/static/2a4690c1b457b7f623f841f3faf5a80c/ad997/service-worker-error-example.png 1012w","/static/2a4690c1b457b7f623f841f3faf5a80c/5fada/service-worker-error-example.png 1706w"],sizes:"(max-width: 1706px) 100vw, 1706px",type:"image/png"})),"\n        ",Object(s.mdx)("img",Object.assign({parentName:"picture"},{className:"gatsby-resp-image-image",src:"/static/2a4690c1b457b7f623f841f3faf5a80c/5fada/service-worker-error-example.png",alt:"GitHub Action release example",title:"GitHub Action release example",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"}})),"\n      "),"\n  "),"\n    ")),Object(s.mdx)("p",null,"This is a safety mechanism of the browser which prevents registering the service worker on unsafe connections like HTTP and warns you when you use a self-signed certificate."),Object(s.mdx)("p",null,"Many modern toolchains like ",Object(s.mdx)("a",Object.assign({parentName:"p"},{href:"https://reactjs.org/docs/create-a-new-react-app.html"}),"create react app,")," ",Object(s.mdx)("a",Object.assign({parentName:"p"},{href:"https://nextjs.org/"}),"nexts.js,")," ",Object(s.mdx)("a",Object.assign({parentName:"p"},{href:"https://cli.vuejs.org/"}),"vue cli")," and ",Object(s.mdx)("a",Object.assign({parentName:"p"},{href:"https://cli.angular.io/"}),"angular clis")," allow you to host and develop your application on HTTPS locally and provide you with a self-signed certificate."),Object(s.mdx)("p",null,"e.g ",Object(s.mdx)("a",Object.assign({parentName:"p"},{href:"https://create-react-app.dev/docs/using-https-in-development/"}),"CRA")),Object(s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(s.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(s.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ ",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"set")," ",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token assign-left variable"}),"HTTPS"),Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"true",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&&"),Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"npm")," start"))),Object(s.mdx)("p",null,"This often simplifies the hosting part but often does not help you with the above issue since the certificates are not trusted by the browsers."),Object(s.mdx)("p",null,"There are several ways to resolve this issue."),Object(s.mdx)("ol",null,Object(s.mdx)("li",{parentName:"ol"},Object(s.mdx)("p",{parentName:"li"},"Open Chrome or Firefox such that it pretends certain domains are secure. For example, using Chrome on windows or mac, you can launch it using the following commands:"),Object(s.mdx)("div",Object.assign({parentName:"li"},{className:"gatsby-highlight","data-language":"bash"}),Object(s.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(s.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token shebang important"}),"#!/bin/bash"),"\n",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"# replace https://localhost:3000 with your port"),"\n",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"# on windows"),"\nchrome.exe --user-data-dir",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"/tmp/foo --ignore-certificate-errors ",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\"),"\n   --unsafely-treat-insecure-origin-as-secure",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"https://localhost:3000\n",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"# on mac"),"\n/Applications/Google",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\")," Chrome.app/Contents/MacOS/Google",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\")," Chrome ",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\"),"\n   --user-data-dir",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"/tmp/foo --ignore-certificate-errors --unsafely-treat-insecure-origin-as-secure",Object(s.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"https://localhost:3000")))),Object(s.mdx)("li",{parentName:"ol"},Object(s.mdx)("p",{parentName:"li"},"Another solution is to use and trust a self-signed certificate. Usually, those certificates are generated automatically by the modern development tools but you still have to trust those certificates. To overcome the problems relating to local dev on OSX you can do the following:"),Object(s.mdx)("ul",{parentName:"li"},Object(s.mdx)("li",{parentName:"ul"},"Create your certificate and serve it up"),Object(s.mdx)("li",{parentName:"ul"},"Navigate to the HTTPS URL e.g https://localhost:3000"),Object(s.mdx)("li",{parentName:"ul"},"Click on the not safe button in the URL bar or open dev tools > security > view certificate")),Object(s.mdx)("p",{parentName:"li"},Object(s.mdx)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"466px"}}),"\n      ",Object(s.mdx)("a",Object.assign({parentName:"span"},{className:"gatsby-resp-image-link",href:"/static/bb3197f4c9e397054c90234857ae1839/fc1a1/click-on-not-safe-button.png",style:{display:"block"},target:"_blank",rel:"noopener"}),"\n    ",Object(s.mdx)("span",Object.assign({parentName:"a"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"145.06437768240343%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEMElEQVRIx4VV2VIbVxCdH4kTFm1IQkIzI4002jVikBCrwIAQCJzFTkhVHpKqlMt2HoKpPDp/fNKnUePBSVUeWr3cnr69nL5yWu0e9g+OsDs5wOnpOY6npzg6PsHB4bFy6jzPF0rYyG8it1FEqewqUaaNZ3buTPYO8OnT33jz4x3uPz7g/v4B795/wPsPf+DP+494ePgLb9++Q3nLxWg8wXx+jevFLWaXV7iYzbEdj9EIW+j2BgibbTibpQqCegi/GsD1qvD9AJ5XU11lvwbXrSKVymJ1NYV14Wtr6Ud5PaNykpxMNo9VOXhBJ3H+RuSV9UdO+lp5FuuZPFLiS76W2VBaFUpnCyJ/tjnr4rQbNvF9HCOq1XE1GOCi38dc+Hmvh5nI004HE/GJg7pQA4sowqXYL+Q8qgW4Ft/b4RAz0Z1MrgB/s4xYDgLpU8f10PF8DKTUjusjqtaEAozrDYQVF62Kh75fxbb4x5KAJ9+aH7/RkrekZ4Wyh1y+hEq1jrz0dWNzC8UtsRXLyIqdtrzY8kt7vuQiK5Mtiax+hbJ+46TSOQyiGNPpS+zs7GI2u1J5NJrg/GIu0DlFLJOcnpwJlKY4fXmBQ+FnZzOMx3tKtE32DmXy13DS0khikUHHu/uIJWh/sK3U6Q4EDpGeUW+2umh3+mqLhjtK1Ok3ksDUNWDY7GggEoMSWyQGsWA8ox8/YgDa9vaPVG+EbZUZVAPSgSmTWBoPeDNLpI3Oh0cnT5lQpq3XH8oWHauNnBXoUCoCXCuTxqDe1FuZHdvBzMirtYaeUybVglB5vdFSzu8c7iMHs0qkE/lC1EmUuRm6HUs5yelD2TirdbKCw7KMnVkWZezktPEiIy49V9STVeSjUBAoUSfxjP72cChsOLXh9kiDza9uZOmvtEeLm291GJfzhcLn5vY7tdGHtuvFK4XM6zd3atuq+I8Z8unhrewnb7IsmDk5yTIxX+rkVhVlzZA/dEyWmVnqvMDO7PxJT8jmpwF5k9a/5PZgPns4Ew+o6RsJ/6TufDkA6pxYbsk5OWbAXpObnktkniSHcGFjf/3tdzUQoAQ3m077cHuMsCWrORxhGO8iEj2otx6DJhIxelo9rhoDErwErC+vDgHreoSKJ/YQLl9wsXOaX1Zm1WkPV+Q5/+rFihqYMXUSZQOugd50JmJkumZIB64cd5YGZmsvCjMkJEjMrCarxSzLkiF1zdgXe9DUSp56SND+8PonDcjXhro9Eo2wg7rsdbsboTeIZZd7GrjVGaitJZf3ox1JpPsYkEFsN2mw0qy8ZFmp9OeppxNlPyuZQYh2azQRn/zjtl02DGZzxf8cyNNQrOS7n3/Rj7iT3FfC5lj+Cnh2dn6p+83dZSu409x1W8dnsGH63F2+JJSZrb0klI1Mpy+hZbv7r4C6u8sNMPn/yPqY3G8L+A9t1Lz2ujrg/gAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.mdx)("picture",{parentName:"a"},"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/bb3197f4c9e397054c90234857ae1839/fbab0/click-on-not-safe-button.webp 466w"],sizes:"(max-width: 466px) 100vw, 466px",type:"image/webp"})),"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/bb3197f4c9e397054c90234857ae1839/fc1a1/click-on-not-safe-button.png 466w"],sizes:"(max-width: 466px) 100vw, 466px",type:"image/png"})),"\n        ",Object(s.mdx)("img",Object.assign({parentName:"picture"},{className:"gatsby-resp-image-image",src:"/static/bb3197f4c9e397054c90234857ae1839/fc1a1/click-on-not-safe-button.png",alt:"click on save button",title:"click on save button",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"}})),"\n      "),"\n  "),"\n    ")),Object(s.mdx)("ul",{parentName:"li"},Object(s.mdx)("li",{parentName:"ul"},"drag the certificate icon to the desktop and double click on it, this will open up keychain access.")),Object(s.mdx)("p",{parentName:"li"},Object(s.mdx)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1068px"}}),"\n      ",Object(s.mdx)("a",Object.assign({parentName:"span"},{className:"gatsby-resp-image-link",href:"/static/842964f5018cad5898d374650eb01674/d53ff/import-certificate.png",style:{display:"block"},target:"_blank",rel:"noopener"}),"\n    ",Object(s.mdx)("span",Object.assign({parentName:"a"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.509881422924906%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+klEQVQoz11Tu47TQBT13yBW61ecXcd24ldi5+EELZHzfjaRQktBj/gAegpKJCj3B/gYOgpEB93B54aJvFsc3as7M2fOnXNHS8MOfK8Fr+XC932B53nodDooigKj0QiDwUAwHA4RBIGsq70Ea+12G3GSQBvO1yhWB4TZAEkcIYoihGEoYN7tdoU8TVPJWWdMqsOsx3EshIZhoNVqQfvx8xd+//2Dd+8/YLVY4HQ64Xg8YrvdYrfb4Xw+Yz6fy0ESMfZ6vSshL6A6XddFufb18Tu+PX7BbLtA2AllM9VkWSa5UsXW6gQ8rLphnSpFoW6YeHlzWx0IsNlssKhUlmWJ1WqF2Wwmcb/fY71eC9Se5XIpOdfYCcld14XmNBqwbUtu4AJJeCDP82t7VEso5fUOFJrN5kVhoyJUcBznGk3TlIeuQ9UY6+vMLcu+vKFt20LCWIe6hLllWU9AAwhFbJoWTP1GRu+JwucgGd+FJhA0hiZwHvv9PpK0MixK5Gnu4ge4fgTteVtEXTWJ1HvRzTzPLuZUY7UoX+NVkeOh6CGYvMF9O4NGtzh3dIymHA4HudEwdGlPtcV8Op2Kq5vNFlkvxYvsLZz9Z3jHT9DLj7gPqp/CrzUej/9jgslkIkN7+VKXeaNSusjRUK4GgY9btw8jLHGXzqC3p7Cde/wDfjqq6bxluWAAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.mdx)("picture",{parentName:"a"},"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/842964f5018cad5898d374650eb01674/6b97b/import-certificate.webp 506w","/static/842964f5018cad5898d374650eb01674/2dbb9/import-certificate.webp 1012w","/static/842964f5018cad5898d374650eb01674/55b8e/import-certificate.webp 1068w"],sizes:"(max-width: 1068px) 100vw, 1068px",type:"image/webp"})),"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/842964f5018cad5898d374650eb01674/29f4e/import-certificate.png 506w","/static/842964f5018cad5898d374650eb01674/ad997/import-certificate.png 1012w","/static/842964f5018cad5898d374650eb01674/d53ff/import-certificate.png 1068w"],sizes:"(max-width: 1068px) 100vw, 1068px",type:"image/png"})),"\n        ",Object(s.mdx)("img",Object.assign({parentName:"picture"},{className:"gatsby-resp-image-image",src:"/static/842964f5018cad5898d374650eb01674/d53ff/import-certificate.png",alt:"import the certificate",title:"import the certificate",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"}})),"\n      "),"\n  "),"\n    ")),Object(s.mdx)("ul",{parentName:"li"},Object(s.mdx)("li",{parentName:"ul"},Object(s.mdx)("p",{parentName:"li"},"drag the certificate icon to log-in, open up log-in and double click on the certificate (it should be named with the dev domain or similar) open up the trust dropdown and select always trust. Go back to your app close the window and re-open with https, you should now have ‘faux’ https for your dev domain."),Object(s.mdx)("p",{parentName:"li"},Object(s.mdx)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1066px"}}),"\n      ",Object(s.mdx)("a",Object.assign({parentName:"span"},{className:"gatsby-resp-image-link",href:"/static/16bfb5840dac05323680fa5e0038e85a/2e367/trust.png",style:{display:"block"},target:"_blank",rel:"noopener"}),"\n    ",Object(s.mdx)("span",Object.assign({parentName:"a"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"66.40316205533597%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVUlEQVQ4y3WTy27TUBRF/TFAY8d2Xk6dOK4fiZ00TzuvNq3aQuumaaoOYNoBIyQmzGHCF/A1zPmXzd03cQWoRNo6vo60zj37bCuXbQ/pxMRhXEc7aCMIfYRhiCjqoNPpII4jzGZTLBZz9HpdeX5JURTJ/5Wr8wG+f/uMTx8f4fsukiQRwACmaUiVSqasqlqApqmyFosadL0olT8XCgfwvCMoX788gb9fP39gNOjh8uoKy+UCk8lYwlkpx2mi2Wzg6MiVTf6EsqGmFRAEAZSkH+LpQ4aLeROB72A4HOD4uId+/1hWjuH7HhoNW4rQet1CtVaVlXDD0PdAH4qqiQ7lClpuCNepo1IpoVqtPKtSKaNcLslK8Z1lWaiJWreqMPdAWkGrlFLJEA++MLUtPPDguq5QS6rVctBuh5jPZ5hOU6Rpgm43RjcO4XWnaMSncBp1Mf7OS8dxoJBO2bYtfcq9YuWIHHc0GkorKG4zjgIBTGE2+zANFfqeQUkg6bZ9KLufnCzlMpJkgvF4JCOz2Wxwd7fG7W0m4rPAcjbGaPUAwz+Hrr4SION5OQphHI+54yJ4G4II5JljErZe30rgXAInGK620AnUXv8NzK+ab4ueDQZ9uV02IZiwLLvBzc21iNQSp4sEo7NH6MHF/4G86cHBG9REHAjjIugZl5FlmQReX78T5ylmyRD95RqGd/oykDCCuACOz08pTVMJpIcPD1tst/e4v99gtVrh7GSKycV76OFbAfzHw/wTs6zaPiq7uHDTeZiZL4aW2iXBht0KoddcAVLlhDnwN6ufyND7IeT0AAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.mdx)("picture",{parentName:"a"},"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/16bfb5840dac05323680fa5e0038e85a/6b97b/trust.webp 506w","/static/16bfb5840dac05323680fa5e0038e85a/2dbb9/trust.webp 1012w","/static/16bfb5840dac05323680fa5e0038e85a/fbb05/trust.webp 1066w"],sizes:"(max-width: 1066px) 100vw, 1066px",type:"image/webp"})),"\n        ",Object(s.mdx)("source",Object.assign({parentName:"picture"},{srcSet:["/static/16bfb5840dac05323680fa5e0038e85a/29f4e/trust.png 506w","/static/16bfb5840dac05323680fa5e0038e85a/ad997/trust.png 1012w","/static/16bfb5840dac05323680fa5e0038e85a/2e367/trust.png 1066w"],sizes:"(max-width: 1066px) 100vw, 1066px",type:"image/png"})),"\n        ",Object(s.mdx)("img",Object.assign({parentName:"picture"},{className:"gatsby-resp-image-image",src:"/static/16bfb5840dac05323680fa5e0038e85a/2e367/trust.png",alt:"trust the certificate",title:"trust the certificate",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"}})),"\n      "),"\n  "),"\n    ")))))),Object(s.mdx)("p",null,"That’s it now you can go to your app served locally and your Service Worker gets registered properly and you can deep dive into developing and debugging features."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-posts-24-04-2020-debug-service-worker-index-mdx-d5af7aad35ad0f383aff.js.map